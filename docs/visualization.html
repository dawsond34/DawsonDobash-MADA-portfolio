<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Visualization</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">My Data Analysis Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="./aboutme.html">About Me</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./rcoding.html">R Coding</a>
    </li>
    <li>
      <a href="./visualization.html">Visualization</a>
    </li>
    <li>
      <a href="./tidytuesday.html">Tidy Tuesday</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="URL-TO-THIS-REPOSITORY-HERE">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Visualization</h1>

</div>


<p><a href="https://projects.fivethirtyeight.com/non-voters-poll-2020-election/">Here</a> is the link to the data and vizualization I chose for this exercise. Below is the visual I want to recreate.</p>
<p><a href="https://github.com/fivethirtyeight/data/tree/master/non-voters">This</a> is the link to the github page for the actual data for this original visual. I will use this data to reconstruct the visual.</p>
<p>Below shows the visual and this is talking about voting and dis disaggregated into different demographics. The thing that stood out to me was the presentation of the five figures together. I wanted to figure out how to do that as well as just learning how to do percent stacked barcharts with a similar legend for all of the bar charts.</p>
<p><img src="Visual.png" /> Before I can work on the data, I have to import the data. Usually I am able to hit a download button for the data set but this time when I have download, it takes me to a page on the internet that is showing the raw data. After many attempts to try to download it, I decided to use the data set via the web link and read.csv. I made sure the import was successful and all of the variables and values were place in the right places.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#I am reading in the tidyverse library.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.3     v dplyr   1.0.7
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   2.0.1     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span></code></pre></div>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## Loading required package: survival</code></pre>
<pre><code>## Loading required package: Formula</code></pre>
<pre><code>## 
## Attaching package: &#39;Hmisc&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     src, summarize</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     format.pval, units</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;gridExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;scales&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     discard</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     col_factor</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#This is reading in the raw data</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/fivethirtyeight/data/master/non-voters/nonvoters_data.csv&quot;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(file, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>At first when I saw this visualization, I saw multiple variables that seemed to be grouped. Upon looking at the data, it looks like there was manual grouping on some variables. So my first task was to recreate these groupings.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This is cleaning the data. I am making categories by combining categories and making numeric values into categorical values.I also removed any missing data. This also subsets the original raw data into variables I need for this visual. </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>clean_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Q30 <span class="sc">!=</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Party_ID =</span> <span class="fu">ifelse</span>(Q30 <span class="sc">==</span> <span class="dv">5</span> <span class="sc">|</span> Q30 <span class="sc">==</span> <span class="dv">4</span> <span class="sc">|</span> Q30 <span class="sc">==</span><span class="dv">3</span>, <span class="st">&quot;Independent/Neither&quot;</span>, <span class="fu">ifelse</span>(Q30 <span class="sc">==</span> <span class="dv">2</span>, <span class="st">&quot;Democratic&quot;</span>, <span class="st">&quot;Republican&quot;</span>)), <span class="at">age_cat =</span> <span class="fu">cut</span>(ppage, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">26</span>,<span class="dv">35</span>,<span class="dv">50</span>,<span class="dv">65</span>,<span class="cn">Inf</span>), <span class="at">include.lowest=</span><span class="cn">TRUE</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;26-34&quot;</span>, <span class="st">&quot;35-49&quot;</span>, <span class="st">&quot;50-64&quot;</span>, <span class="st">&quot;65+&quot;</span>)), <span class="at">voter_category =</span> <span class="fu">ifelse</span>(voter_category <span class="sc">==</span> <span class="st">&quot;always&quot;</span>, <span class="st">&quot;ALMOST ALWAYS VOTE&quot;</span>, <span class="fu">ifelse</span>(voter_category <span class="sc">==</span> <span class="st">&quot;sporadic&quot;</span>, <span class="st">&quot;SOMETIMES VOTE&quot;</span>, <span class="st">&quot;RARELY OR NEVER VOTE&quot;</span>)) ) <span class="sc">%&gt;%</span>  <span class="fu">select</span>(age_cat, ppage, race, income_cat, educ, Party_ID, Q30, voter_category, weight) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age_cat <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#This is final cleaning for the data specifically for the display of values within the bar plots. </span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>clean_data<span class="sc">$</span>voter_category <span class="ot">=</span> <span class="fu">factor</span>(clean_data<span class="sc">$</span>voter_category, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;ALMOST ALWAYS VOTE&quot;</span>,<span class="st">&quot;SOMETIMES VOTE&quot;</span>, <span class="st">&quot;RARELY OR NEVER VOTE&quot;</span>))</span></code></pre></div>
<p>One distinct feature of this visual was the grouping of 5 individual plots. I have not created such a visual with multiple figure displayed this way and this is one reason why I wanted to pick this visual. These figures are called percent stacked barcharts. At first when I plotted these, it looked way different then I realized within the data, there are weights per observation. This variable is used for the y-axis of each of these.</p>
<p><br /></p>
<p>For the arrangement of the plots, I tried two ways. One way (I forgot the name of the command) produced the right arrangement but each plot had individual legends for the fill variable. Therefore, I tried to figure out another command that will let me only have one legend. This command is call ggarrange and it comes from the ggpubr package. The other issue was showing the y-axis as a percent not a decimal. So, within the scales package, there is a command called percent that I can include within each ggplot command.</p>
<p><br /></p>
<p>The other thing I wanted to figure out was how to put a title over all of the figures just like the original. Within the ggpubr package, annotate_figure allowed me to give a title and subtitle for this visual.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The next five ggplot commands create the specific figures. Each ggplot are all similar just using different independent variables. I included specific orders for levels of categories, changed the look of the plot to vertical to horizontal, and making the y-axis a percentage instead of decimals.</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plot1<span class="ot">=</span><span class="fu">ggplot</span>(clean_data, <span class="fu">aes</span>(<span class="at">fill=</span>voter_category, <span class="at">x=</span>race, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;fill&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent) <span class="sc">+</span><span class="fu">xlab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Race&quot;</span>) <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;White&quot;</span>,<span class="st">&quot;Other/Mixed&quot;</span>,<span class="st">&quot;Hispanic&quot;</span>, <span class="st">&quot;Black&quot;</span>)) <span class="sc">+</span> <span class="fu">scale_fill_discrete</span>(<span class="at">limit =</span> <span class="fu">c</span>(<span class="st">&quot;RARELY OR NEVER VOTE&quot;</span>, <span class="st">&quot;SOMETIMES VOTE&quot;</span>, <span class="st">&quot;ALMOST ALWAYS VOTE&quot;</span>))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>plot2<span class="ot">=</span><span class="fu">ggplot</span>(clean_data, <span class="fu">aes</span>(<span class="at">fill=</span>voter_category, <span class="at">x=</span>Party_ID, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;fill&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()<span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span><span class="fu">xlab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Party ID&quot;</span>) <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Republican&quot;</span>,<span class="st">&quot;Independent/Neither&quot;</span>,<span class="st">&quot;Democratic&quot;</span>)) <span class="sc">+</span> <span class="fu">scale_fill_discrete</span>(<span class="at">limit =</span> <span class="fu">c</span>(<span class="st">&quot;RARELY OR NEVER VOTE&quot;</span>, <span class="st">&quot;SOMETIMES VOTE&quot;</span>, <span class="st">&quot;ALMOST ALWAYS VOTE&quot;</span>))</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>plot3<span class="ot">=</span><span class="fu">ggplot</span>(clean_data, <span class="fu">aes</span>(<span class="at">fill=</span>voter_category, <span class="at">x=</span>age_cat, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;fill&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()<span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span><span class="fu">xlab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Age&quot;</span>) <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;65+&quot;</span>,<span class="st">&quot;50-64&quot;</span>,<span class="st">&quot;35-49&quot;</span>, <span class="st">&quot;26-34&quot;</span>)) <span class="sc">+</span> <span class="fu">scale_fill_discrete</span>(<span class="at">limit =</span> <span class="fu">c</span>(<span class="st">&quot;RARELY OR NEVER VOTE&quot;</span>, <span class="st">&quot;SOMETIMES VOTE&quot;</span>, <span class="st">&quot;ALMOST ALWAYS VOTE&quot;</span>))</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>plot4<span class="ot">=</span><span class="fu">ggplot</span>(clean_data, <span class="fu">aes</span>(<span class="at">fill=</span>voter_category, <span class="at">x=</span>income_cat, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;fill&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()<span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span><span class="fu">xlab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Income&quot;</span>) <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;$125k or more&quot;</span>,<span class="st">&quot;$75-125k&quot;</span>,<span class="st">&quot;$40-75k&quot;</span>, <span class="st">&quot;Less than $40k&quot;</span>)) <span class="sc">+</span> <span class="fu">scale_fill_discrete</span>(<span class="at">limit =</span> <span class="fu">c</span>(<span class="st">&quot;RARELY OR NEVER VOTE&quot;</span>, <span class="st">&quot;SOMETIMES VOTE&quot;</span>, <span class="st">&quot;ALMOST ALWAYS VOTE&quot;</span>))</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>plot5<span class="ot">=</span><span class="fu">ggplot</span>(clean_data, <span class="fu">aes</span>(<span class="at">fill=</span>voter_category, <span class="at">x=</span>educ, <span class="at">y=</span>weight)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;fill&quot;</span>, <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()<span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent)<span class="sc">+</span><span class="fu">xlab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="at">label =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Education&quot;</span>) <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;College&quot;</span>,<span class="st">&quot;Some college&quot;</span>,<span class="st">&quot;High school or less&quot;</span>)) <span class="sc">+</span> <span class="fu">scale_fill_discrete</span>(<span class="at">limit =</span> <span class="fu">c</span>(<span class="st">&quot;RARELY OR NEVER VOTE&quot;</span>, <span class="st">&quot;SOMETIMES VOTE&quot;</span>, <span class="st">&quot;ALMOST ALWAYS VOTE&quot;</span>))</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#ggarange will show the five figure in the same position as the original visual. It also created a common legend for the fill variable. </span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>joint_plot <span class="ot">=</span> <span class="fu">ggarrange</span>(plot1, plot4, plot3, plot5, plot2, <span class="at">ncol=</span><span class="dv">3</span>, <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">common.legend =</span> <span class="cn">TRUE</span>, <span class="at">legend=</span><span class="st">&quot;top&quot;</span> )</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co">#annotate_figure will give the overall visual with a main title and a subtitle below the visual. </span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate_figure</span>(joint_plot, <span class="at">top =</span> <span class="fu">text_grob</span>(<span class="st">&quot;Those who almost vote and those who sometimes vote aren&#39;t that different </span><span class="sc">\n</span><span class="st"> Demographic information of survey respondents, by voting history&quot;</span>), <span class="at">bottom =</span> <span class="fu">text_grob</span>(<span class="st">&quot;We used a voter file combined with survey responses to classify voters. Rarely or never vote: voted in no more than one election. Sometimes vote: voted in at least two elections but not all (or all but one). Almost always vote: voted in all for all but one election.&quot;</span>, <span class="at">size=</span><span class="dv">8</span>))</span></code></pre></div>
<p><img src="visualization_files/figure-html/plots-1.png" width="672" /></p>
<p><br /></p>
<p>Most of the visual looks almost exactly the same except the color. I tried to figure out the color but I could not figure that out. I feel like I have changed colors before but for some reason I could not figure it out for this exercise. Therefore, if anyone could suggest to me ways to change the color that would be great!</p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
